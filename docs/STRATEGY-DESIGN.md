# Nado-Lighter å¯¹å†²ç­–ç•¥è®¾è®¡æ–‡æ¡£

## ä¸€ã€ç°çŠ¶è¯„ä¼°æ¸…å•

### âœ… å·²å®Œæˆçš„åŠŸèƒ½

1. **åŸºç¡€ä¸‹å•èƒ½åŠ›**
   - Nado é™ä»·å•ä¸‹å• (`placePerpOrder`)
   - Lighter å¸‚ä»·å•ä¸‹å• (`createOrder` via Python SDK)
   - è®¢å•ç°¿æ•°æ®è·å– (`getMarketLiquidity`, `getOrderBookDetails`)

2. **åŸºç¡€å¯¹å†²æµç¨‹**
   - é¡ºåºæ‰§è¡Œï¼šNado ä¸‹å• â†’ ç­‰å¾…æˆäº¤ â†’ Lighter å¯¹å†²
   - ä»·æ ¼è®¡ç®—ï¼šNado maker ä»·æ ¼ / Lighter taker ä»·æ ¼
   - æ–¹å‘åˆ¤æ–­ï¼šåŸºäºæ‰‹ç»­è´¹è®¡ç®—æœ€ä¼˜æ–¹å‘

3. **è®¢å•çŠ¶æ€æŸ¥è¯¢**
   - `getSubaccountOrders` æŸ¥è¯¢ Nado æŒ‚å•
   - `_waitForNadoFill` è½®è¯¢ç­‰å¾…æˆäº¤

4. **é…ç½®ç®¡ç†**
   - é€šè¿‡ `.env` é…ç½®å¸ç§ã€æ•°é‡ã€æ»‘ç‚¹ç­‰å‚æ•°
   - CLI å‘½ä»¤è¡Œå·¥å…· (`hedge_manager.js`)

### âš ï¸ éƒ¨åˆ†å®Œæˆ / æœ‰æ½œåœ¨é—®é¢˜

1. **è®¢å•ç­‰å¾…é€»è¾‘ (`_waitForNadoFill`)**
   - âŒ è¶…æ—¶åæ’¤å•å¤±è´¥ï¼š`cancelOrders` å‚æ•°æ ¼å¼é”™è¯¯
   - âŒ æ²¡æœ‰ã€Œæ’¤å•åé‡æ–°æŒ‚å•ã€çš„é‡è¯•æœºåˆ¶
   - âŒ éƒ¨åˆ†æˆäº¤å¤„ç†ä¸å®Œå–„

2. **Lighter å¯¹å†²ç¡®è®¤**
   - âŒ åªè¿”å› `submitted` çŠ¶æ€ï¼Œæ²¡æœ‰ç¡®è®¤å®é™…æˆäº¤
   - âŒ æ²¡æœ‰æ»‘ç‚¹æ£€æŸ¥æœºåˆ¶
   - âŒ å¯¹å†²å¤±è´¥åæ²¡æœ‰å›æ»š/è¡¥æ•‘é€»è¾‘

3. **çŠ¶æ€ç®¡ç†**
   - âŒ æ²¡æœ‰å®Œæ•´çš„çŠ¶æ€æœº
   - âŒ æ²¡æœ‰è®¢å• ID åˆ°å¯¹å†²æµç¨‹çš„æ˜ å°„
   - âŒ æ²¡æœ‰æŒä¹…åŒ–çŠ¶æ€ï¼ˆé‡å¯åä¸¢å¤±ï¼‰

### âŒ å®Œå…¨ç¼ºå¤±çš„æ¨¡å—

1. **60ç§’è¶…æ—¶é‡æŒ‚æœºåˆ¶** - æ ¸å¿ƒéœ€æ±‚ï¼Œå®Œå…¨ç¼ºå¤±
2. **å®Œæ•´çŠ¶æ€æœº** - æ²¡æœ‰å®šä¹‰çŠ¶æ€è½¬ç§»
3. **é£é™©æ§åˆ¶æ¨¡å—** - æ•å£ç›‘æ§ã€ç´§æ€¥å¹³ä»“
4. **å¼‚å¸¸æ¢å¤æœºåˆ¶** - API é”™è¯¯é‡è¯•ã€ç½‘ç»œä¸­æ–­å¤„ç†
5. **å¯¹å†²æµç¨‹å”¯ä¸€æ ‡è¯†** - é˜²æ­¢é‡å¤å¯¹å†²
6. **ç»“æ„åŒ–æ—¥å¿—ç³»ç»Ÿ** - ä¾¿äºå¤ç›˜å’Œç›‘æ§

---

## äºŒã€ç­–ç•¥æ¶æ„æ–¹æ¡ˆ

### 2.1 çŠ¶æ€æœºè®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å¯¹å†²çŠ¶æ€æœº                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”                                                      â”‚
â”‚   â”‚ IDLE â”‚ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚   â””â”€â”€â”¬â”€â”€â”€â”˜                                            â”‚         â”‚
â”‚      â”‚ startHedge()                                   â”‚         â”‚
â”‚      â–¼                                                â”‚         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚         â”‚
â”‚   â”‚ PLACING_NADO_BUY â”‚ â”€â”€(ä¸‹å•å¤±è´¥)â”€â”€â†’ ERROR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚         â”‚
â”‚            â”‚ ä¸‹å•æˆåŠŸ                                  â”‚         â”‚
â”‚            â–¼                                          â”‚         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚         â”‚
â”‚   â”‚ WAITING_NADO_FILL  â”‚ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚         â”‚
â”‚   â”‚  (60s è¶…æ—¶è®¡æ—¶)     â”‚                   â”‚          â”‚         â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚          â”‚         â”‚
â”‚            â”‚                               â”‚          â”‚         â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”                        â”‚          â”‚         â”‚
â”‚     â”‚      â”‚      â”‚                        â”‚          â”‚         â”‚
â”‚     â–¼      â–¼      â–¼                        â”‚          â”‚         â”‚
â”‚  [æˆäº¤]  [è¶…æ—¶]  [éƒ¨åˆ†æˆäº¤]                  â”‚          â”‚         â”‚
â”‚     â”‚      â”‚      â”‚                        â”‚          â”‚         â”‚
â”‚     â”‚      â”‚      â””â”€â”€â†’ PARTIAL_FILLED â”€â”€â”€â”€â”€â”¤          â”‚         â”‚
â”‚     â”‚      â”‚           (å†³å®šæ˜¯å¦ç»§ç»­ç­‰å¾…)    â”‚          â”‚         â”‚
â”‚     â”‚      â”‚                               â”‚          â”‚         â”‚
â”‚     â”‚      â””â”€â”€â†’ CANCELING_NADO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚         â”‚
â”‚     â”‚           â”‚                          â”‚          â”‚         â”‚
â”‚     â”‚           â–¼                          â”‚          â”‚         â”‚
â”‚     â”‚      REPRICING_NADO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚         â”‚
â”‚     â”‚      (é‡æ–°è®¡ç®—ä»·æ ¼ï¼Œé‡æ–°æŒ‚å•)                     â”‚         â”‚
â”‚     â”‚      (è¶…è¿‡æœ€å¤§é‡è¯•æ¬¡æ•° â†’ ERROR)                  â”‚         â”‚
â”‚     â”‚                                                 â”‚         â”‚
â”‚     â–¼                                                 â”‚         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚         â”‚
â”‚   â”‚ HEDGING_ON_LIGHTER  â”‚ â”€â”€(å¯¹å†²å¤±è´¥)â”€â”€â†’ ERROR â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚         â”‚
â”‚            â”‚ å¯¹å†²æˆåŠŸ                                  â”‚         â”‚
â”‚            â–¼                                          â”‚         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚         â”‚
â”‚   â”‚ POSITION_OPENED â”‚ â”€â”€(å¼€å§‹å¹³ä»“)â”€â”€â†’ PLACING_NADO_SELLâ”‚        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚         â”‚
â”‚                                                       â”‚         â”‚
â”‚   (å¹³ä»“æµç¨‹ä¸å¼€ä»“å¯¹ç§°ï¼ŒçŠ¶æ€ç±»ä¼¼)                         â”‚         â”‚
â”‚                                                       â”‚         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”                                           â”‚         â”‚
â”‚   â”‚ ERROR â”‚ â”€â”€(äººå·¥ç¡®è®¤/è‡ªåŠ¨æ¢å¤)â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”˜                                                     â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 çŠ¶æ€å®šä¹‰

```typescript
enum HedgeState {
  IDLE = 'IDLE',                           // ç©ºé—²ï¼Œç­‰å¾…æŒ‡ä»¤
  
  // å¼€ä»“æµç¨‹
  PLACING_NADO_BUY = 'PLACING_NADO_BUY',   // æ­£åœ¨ Nado ä¸‹ä¹°å•
  PLACING_NADO_SELL = 'PLACING_NADO_SELL', // æ­£åœ¨ Nado ä¸‹å–å•
  WAITING_NADO_FILL = 'WAITING_NADO_FILL', // ç­‰å¾… Nado æˆäº¤
  PARTIAL_FILLED = 'PARTIAL_FILLED',       // Nado éƒ¨åˆ†æˆäº¤
  CANCELING_NADO = 'CANCELING_NADO',       // æ­£åœ¨æ’¤é”€ Nado è®¢å•
  REPRICING_NADO = 'REPRICING_NADO',       // é‡æ–°è®¡ç®—ä»·æ ¼å¹¶æŒ‚å•
  HEDGING_ON_LIGHTER = 'HEDGING_ON_LIGHTER', // æ­£åœ¨ Lighter å¯¹å†²
  
  // æŒä»“çŠ¶æ€
  POSITION_OPENED = 'POSITION_OPENED',     // å·²å¼€ä»“ï¼ŒæŒæœ‰å¯¹å†²å¤´å¯¸
  
  // å¹³ä»“æµç¨‹ï¼ˆä¸å¼€ä»“å¯¹ç§°ï¼‰
  CLOSING_NADO = 'CLOSING_NADO',           // æ­£åœ¨ Nado å¹³ä»“
  CLOSING_LIGHTER = 'CLOSING_LIGHTER',     // æ­£åœ¨ Lighter å¹³ä»“
  
  // å¼‚å¸¸çŠ¶æ€
  ERROR = 'ERROR',                         // å¼‚å¸¸ï¼Œéœ€è¦äººå·¥å¹²é¢„
  RECOVERING = 'RECOVERING',               // æ­£åœ¨æ¢å¤
}
```

### 2.3 å‚æ•°åŒ–é…ç½®

```typescript
interface HedgeConfig {
  // åŸºç¡€å‚æ•°
  coin: 'BTC' | 'ETH' | 'SOL';
  size: number;                    // æ¯æ¬¡äº¤æ˜“æ•°é‡
  
  // Nado é™ä»·å•å‚æ•°
  nadoPriceOffset: number;         // ä»·æ ¼åç§»ï¼ˆç›¸å¯¹äº bid/askï¼‰
  nadoOrderTimeout: number;        // é™ä»·å•ç­‰å¾…è¶…æ—¶ï¼ˆæ¯«ç§’ï¼‰ï¼Œé»˜è®¤ 60000
  nadoMaxRetries: number;          // æœ€å¤§é‡è¯•æ¬¡æ•°ï¼Œé»˜è®¤ 3
  nadoPollInterval: number;        // è½®è¯¢é—´éš”ï¼ˆæ¯«ç§’ï¼‰ï¼Œé»˜è®¤ 500
  
  // Lighter å¸‚ä»·å•å‚æ•°
  lighterMaxSlippage: number;      // æœ€å¤§æ»‘ç‚¹å®¹å¿ï¼Œé»˜è®¤ 0.005 (0.5%)
  lighterTimeInForce: 'ioc' | 'gtc'; // è®¢å•ç±»å‹
  
  // éƒ¨åˆ†æˆäº¤å¤„ç†
  allowPartialFill: boolean;       // æ˜¯å¦å…è®¸éƒ¨åˆ†æˆäº¤
  minFillRatio: number;            // æœ€å°æˆäº¤æ¯”ä¾‹ï¼Œä½äºæ­¤æ¯”ä¾‹æ’¤å•é‡æŒ‚
  
  // é£é™©æ§åˆ¶
  maxExposure: number;             // æœ€å¤§æ•å£ï¼ˆå•è¾¹ï¼‰
  emergencyStopLoss: number;       // ç´§æ€¥æ­¢æŸé˜ˆå€¼
  
  // æ—¥å¿—
  logLevel: 'debug' | 'info' | 'warn' | 'error';
}
```

### 2.4 é£é™©æ§åˆ¶è®¾è®¡

#### åœºæ™¯ 1: Nado æˆäº¤ä½† Lighter ä¸‹å•å¤±è´¥

```
å¤„ç†æµç¨‹:
1. è®°å½•ã€Œæœªå¯¹å†²æ•å£ã€åˆ°çŠ¶æ€
2. ç«‹å³é‡è¯• Lighter ä¸‹å•ï¼ˆæœ€å¤š 3 æ¬¡ï¼‰
3. å¦‚æœä»å¤±è´¥:
   - å‘é€å‘Šè­¦é€šçŸ¥
   - è¿›å…¥ ERROR çŠ¶æ€
   - è®°å½•è¯¦ç»†æ—¥å¿—ä¾›äººå·¥å¤„ç†
4. å¯é€‰: åœ¨ Nado åå‘å¹³ä»“ï¼ˆç´§æ€¥æ¨¡å¼ï¼‰
```

#### åœºæ™¯ 2: Lighter æ»‘ç‚¹è¶…æ ‡

```
å¤„ç†æµç¨‹:
1. æ£€æŸ¥å®é™…æˆäº¤ä»· vs é¢„æœŸä»·æ ¼
2. å¦‚æœæ»‘ç‚¹ > maxSlippage:
   - è®°å½• WARNING æ—¥å¿—
   - ç»§ç»­æ‰§è¡Œï¼ˆå·²æˆäº¤æ— æ³•æ’¤å›ï¼‰
   - æ›´æ–°ç»Ÿè®¡æ•°æ®
3. å¦‚æœæ»‘ç‚¹ä¸¥é‡è¶…æ ‡ï¼ˆ> 2x maxSlippageï¼‰:
   - å‘é€å‘Šè­¦é€šçŸ¥
   - è€ƒè™‘æš‚åœåç»­äº¤æ˜“
```

#### åœºæ™¯ 3: API é”™è¯¯ / ç½‘ç»œä¸­æ–­

```
å¤„ç†æµç¨‹:
1. æ•è·å¼‚å¸¸ï¼Œè®°å½•è¯¦ç»†é”™è¯¯ä¿¡æ¯
2. æ ¹æ®é”™è¯¯ç±»å‹å†³å®š:
   - å¯é‡è¯•é”™è¯¯ï¼ˆè¶…æ—¶ã€ç½‘ç»œï¼‰: æŒ‡æ•°é€€é¿é‡è¯•
   - ä¸å¯é‡è¯•é”™è¯¯ï¼ˆä½™é¢ä¸è¶³ã€å‚æ•°é”™è¯¯ï¼‰: è¿›å…¥ ERROR çŠ¶æ€
3. é‡è¯•æ¬¡æ•°è¶…é™:
   - è¿›å…¥ ERROR çŠ¶æ€
   - å‘é€å‘Šè­¦é€šçŸ¥
   - ç­‰å¾…äººå·¥å¹²é¢„
```

---

## ä¸‰ã€æ–‡ä»¶ç»“æ„è®¾è®¡

```
nado-lighter-hedge/
â”œâ”€â”€ strategies/
â”‚   â”œâ”€â”€ hedge-strategy.js      # ğŸ†• ä¸»ç­–ç•¥ç±»ï¼ˆçŠ¶æ€æœºå®ç°ï¼‰
â”‚   â”œâ”€â”€ nado-order-manager.js  # ğŸ†• Nado è®¢å•ç®¡ç†ï¼ˆä¸‹å•/æ’¤å•/é‡æŒ‚ï¼‰
â”‚   â”œâ”€â”€ lighter-hedger.js      # ğŸ†• Lighter å¯¹å†²æ‰§è¡Œå™¨
â”‚   â”œâ”€â”€ risk-controller.js     # ğŸ†• é£é™©æ§åˆ¶æ¨¡å—
â”‚   â”œâ”€â”€ hedge_executor.js      # ä¿ç•™ï¼Œä½œä¸ºåº•å±‚æ‰§è¡Œå™¨
â”‚   â”œâ”€â”€ hedge_operations.js    # ä¿ç•™ï¼Œé«˜çº§æ“ä½œå°è£…
â”‚   â””â”€â”€ hedge_manager.js       # CLI å…¥å£
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ logger.js              # ğŸ†• ç»“æ„åŒ–æ—¥å¿—
â”‚   â”œâ”€â”€ state-store.js         # ğŸ†• çŠ¶æ€æŒä¹…åŒ–
â”‚   â””â”€â”€ notifier.js            # ğŸ†• å‘Šè­¦é€šçŸ¥ï¼ˆTelegramï¼‰
â”œâ”€â”€ types/
â”‚   â””â”€â”€ index.js               # ğŸ†• ç±»å‹å®šä¹‰
â””â”€â”€ config/
    â””â”€â”€ default.js             # ğŸ†• é»˜è®¤é…ç½®
```

---

## å››ã€æ ¸å¿ƒå‡½æ•°è®¾è®¡

### 4.1 Nado è®¢å•ç®¡ç†å™¨

```javascript
class NadoOrderManager {
  /**
   * ä¸‹é™ä»·å•å¹¶ç­‰å¾…æˆäº¤ï¼ˆå¸¦è¶…æ—¶é‡æŒ‚ï¼‰
   * @returns {Promise<OrderResult>}
   */
  async placeAndWaitWithRetry(params: {
    productId: number,
    side: 'buy' | 'sell',
    size: number,
    timeout: number,      // å•æ¬¡ç­‰å¾…è¶…æ—¶ï¼ˆæ¯«ç§’ï¼‰
    maxRetries: number,   // æœ€å¤§é‡è¯•æ¬¡æ•°
    priceStrategy: 'best' | 'mid' | 'aggressive',
  }): Promise<{
    status: 'filled' | 'partial' | 'failed',
    filledSize: number,
    avgPrice: number,
    retries: number,
    orders: OrderInfo[],  // æ‰€æœ‰ä¸‹è¿‡çš„è®¢å•
  }>

  /**
   * è®¡ç®—é™ä»·å•ä»·æ ¼
   */
  calculateLimitPrice(book: OrderBook, side: 'buy' | 'sell', strategy: string): number

  /**
   * æ’¤é”€è®¢å•å¹¶ç¡®è®¤
   */
  async cancelAndConfirm(productId: number, digest: string): Promise<boolean>
}
```

### 4.2 Lighter å¯¹å†²å™¨

```javascript
class LighterHedger {
  /**
   * æ‰§è¡Œå¸‚ä»·å¯¹å†²
   */
  async executeMarketHedge(params: {
    symbol: string,
    side: 'buy' | 'sell',
    size: number,
    maxSlippage: number,
    context: HedgeContext,  // å…³è”çš„å¯¹å†²æµç¨‹ä¿¡æ¯
  }): Promise<{
    status: 'success' | 'failed' | 'slippage_exceeded',
    filledSize: number,
    avgPrice: number,
    slippage: number,
    orderId: string,
  }>
}
```

### 4.3 ä¸»ç­–ç•¥ç±»

```javascript
class HedgeStrategy {
  /**
   * æ‰§è¡Œä¸€æ¬¡å®Œæ•´çš„å¯¹å†²ï¼ˆå¼€ä»“ + å¹³ä»“ï¼‰
   */
  async runOnce(coin: string, size: number): Promise<HedgeResult>

  /**
   * æ‰§è¡Œå¾ªç¯å¯¹å†²
   */
  async runLoop(params: LoopParams): Promise<LoopResult>

  /**
   * è·å–å½“å‰çŠ¶æ€
   */
  getState(): HedgeState

  /**
   * ç´§æ€¥åœæ­¢
   */
  async emergencyStop(): Promise<void>
}
```

---

## äº”ã€æµ‹è¯•åœºæ™¯

### åœºæ™¯ 1: æ­£å¸¸æµç¨‹
```
1. Nado é™ä»·ä¹°å• â†’ 30ç§’å†…æˆäº¤
2. Lighter å¸‚ä»·å–å‡ºå¯¹å†² â†’ æˆåŠŸ
3. ç­‰å¾…æŒä»“æ—¶é—´
4. Nado é™ä»·å–å• â†’ 20ç§’å†…æˆäº¤
5. Lighter å¸‚ä»·ä¹°å…¥å¹³ä»“ â†’ æˆåŠŸ
é¢„æœŸ: å…¨æµç¨‹æˆåŠŸï¼Œè®°å½•ç›ˆäº
```

### åœºæ™¯ 2: Nado è¶…æ—¶é‡æŒ‚
```
1. Nado é™ä»·ä¹°å• @ 91000
2. 60ç§’æœªæˆäº¤ â†’ æ’¤å•
3. é‡æ–°è·å–ä»·æ ¼ï¼ŒæŒ‚å• @ 91050
4. 30ç§’å†…æˆäº¤
5. Lighter å¯¹å†²æˆåŠŸ
é¢„æœŸ: é‡è¯• 1 æ¬¡åæˆåŠŸ
```

### åœºæ™¯ 3: Lighter å¯¹å†²å¤±è´¥
```
1. Nado ä¹°å•æˆäº¤
2. Lighter ä¸‹å•å¤±è´¥ï¼ˆAPI é”™è¯¯ï¼‰
3. é‡è¯• 3 æ¬¡ä»å¤±è´¥
4. è¿›å…¥ ERROR çŠ¶æ€
5. å‘é€å‘Šè­¦é€šçŸ¥
é¢„æœŸ: è®°å½•æœªå¯¹å†²æ•å£ï¼Œç­‰å¾…äººå·¥å¤„ç†
```

### åœºæ™¯ 4: éƒ¨åˆ†æˆäº¤
```
1. Nado ä¹°å• 0.01 BTC
2. 60ç§’å†…æˆäº¤ 0.006 BTCï¼ˆ60%ï¼‰
3. å†³å®šç»§ç»­ç­‰å¾…ï¼ˆ> minFillRatio 50%ï¼‰
4. åˆæˆäº¤ 0.004 BTC
5. Lighter å¯¹å†² 0.01 BTC
é¢„æœŸ: å®Œæ•´å¯¹å†²
```

### åœºæ™¯ 5: API è¶…æ—¶æ¢å¤
```
1. Nado ä¸‹å•è¯·æ±‚è¶…æ—¶
2. æŒ‡æ•°é€€é¿é‡è¯•ï¼ˆ1s, 2s, 4sï¼‰
3. ç¬¬ 3 æ¬¡æˆåŠŸ
4. ç»§ç»­æ­£å¸¸æµç¨‹
é¢„æœŸ: è‡ªåŠ¨æ¢å¤
```

---

## å…­ã€å®ç°ä¼˜å…ˆçº§

### P0 - å¿…é¡»å®ç°ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰
1. âœ… 60ç§’è¶…æ—¶æ’¤å•é‡æŒ‚æœºåˆ¶ - **å·²å®ç°å¹¶æµ‹è¯•é€šè¿‡**
2. âœ… å®Œæ•´çŠ¶æ€æœº - **å·²å®ç°å¹¶æµ‹è¯•é€šè¿‡**
3. âœ… Nado æ’¤å•ç¡®è®¤ - **å·²å®ç°å¹¶æµ‹è¯•é€šè¿‡**
4. âœ… ç»“æ„åŒ–æ—¥å¿— - **å·²å®ç°**

### P1 - é‡è¦ï¼ˆé£é™©æ§åˆ¶ï¼‰
1. âœ… Lighter æ»‘ç‚¹æ£€æŸ¥ - **å·²å®ç°**
2. âœ… æœªå¯¹å†²æ•å£è®°å½• - **å·²å®ç°**
3. â³ å¼‚å¸¸çŠ¶æ€å‘Šè­¦ - å¾…å®ç°
4. âœ… API é”™è¯¯é‡è¯• - **å·²å®ç°**

### P2 - å¢å¼ºï¼ˆå¯é€‰ï¼‰
1. â³ çŠ¶æ€æŒä¹…åŒ–
2. â³ Telegram é€šçŸ¥
3. â³ éƒ¨åˆ†æˆäº¤æ™ºèƒ½å¤„ç†
4. â³ æ€§èƒ½ç»Ÿè®¡

---

## ä¸ƒã€æµ‹è¯•è®°å½•

### 2024-12-08 æµ‹è¯•ç»“æœ

**æµ‹è¯•å‘½ä»¤**: `node strategies/run-hedge.js loop BTC 0.0013 5`

**æµ‹è¯•ç»“æœ**: âœ… 5/5 è½®å…¨éƒ¨æˆåŠŸ

| è½®æ¬¡ | å¼€ä»“é‡è¯• | å¹³ä»“é‡è¯• | è€—æ—¶ | çŠ¶æ€ |
|------|----------|----------|------|------|
| 1 | 0 | 1 | 100s | âœ… |
| 2 | 0 | 0 | 21s | âœ… |
| 3 | 1 | 0 | 137s | âœ… |
| 4 | 0 | 3 | 213s | âœ… |
| 5 | 0 | 0 | 43s | âœ… |

**éªŒè¯åŠŸèƒ½**:
- âœ… 60 ç§’è¶…æ—¶è§¦å‘æ’¤å•
- âœ… æ’¤å•åæŒ‰æœ€æ–°ä»·æ ¼é‡æ–°æŒ‚å•
- âœ… æœ€å¤§é‡è¯•æ¬¡æ•°é™åˆ¶ï¼ˆ3 æ¬¡ï¼‰
- âœ… çŠ¶æ€æœºæ­£ç¡®è½¬æ¢
- âœ… Lighter å¸‚ä»·å¯¹å†²æˆåŠŸ
- âœ… å®Œæ•´çš„å¼€ä»“+å¹³ä»“æµç¨‹
